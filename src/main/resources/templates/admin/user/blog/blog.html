<div th:replace="~{header}"></div>

<header
  class="py-5 text-white border-bottom mb-4"
  style="
    background: url('images/bg_blog.jpg') center/cover no-repeat;
    min-height: 50vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background-attachment: fixed;
  "
>
  <div class="container">
    <div class="text-center my-5">
      <h1 class="fw-bolder text-white">Welcome to Blog Home!</h1>
    </div>
  </div>
</header>

<!-- Page content -->
<div class="container">
  <div class="row">
    <!-- Blog entries -->
    <div class="col-lg-8">
      <div th:each="blog : ${blogs}" class="card mb-4">
        <a th:href="@{/blog/{id}(id=${blog.id})}">
          <!-- <img class="card-img-top" th:src="${blog.imageUrl}" alt="Blog Image" /> -->
        </a>
        <div class="card-body">
          <div class="small text-muted" th:text="${blog.formattedDate}"></div>
          <h2 class="card-title" th:text="${blog.title}"></h2>
          <div class="blog-content" th:utext="${blog.content}"></div>
          <a class="btn btn-primary" th:href="@{/blog/{id}(id=${blog.id})}"
            >Read more â†’</a
          >
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="col-lg-4">
      <!-- Search Widget -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="mb-0"><i class="fas fa-search"></i> Search</h5>
        </div>
        <div class="card-body">
          <form th:action="@{/blog}" method="get">
            <div class="input-group">
              <input
                class="form-control"
                type="text"
                name="keyword"
                placeholder="Search title blogs..."
              />
              <button class="btn btn-primary" type="submit">Go!</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Categories widget -->
      <div class="card mb-4 shadow-sm">
        <div class="card-header text-white">
          <h5 class="mb-0"><i class="fas fa-list-ul"></i> Categories</h5>
        </div>
        <div class="card-body">
          <div class="list-group">
            <a
              th:each="category : ${categories}"
              th:href="@{/blog(category=${category})}"
              class="list-group-item list-group-item-action d-flex align-items-center"
            >
              <i class="fas fa-tag me-2"></i>
              <span th:text="${category}"></span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    let contentDivs = document.getElementsByClassName("blog-content");

    for (let i = 0; i < contentDivs.length; i++) {
      let text = contentDivs[i].innerText || contentDivs[i].textContent;
      contentDivs[i].innerText =
        text.length > 200 ? text.substring(0, 200) + "..." : text;
    }
  });
</script>

<div th:replace="~{footer}"></div>
